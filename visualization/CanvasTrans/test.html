<!DOCTYPE HTML>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>缩放</title>
</head>
<body>
<!--<canvas id="canvas" width="400" height="400" style="background-color: rgb(222, 222, 222)">-->
<!--您的浏览器不支持 canvas 标签-->
<!--</canvas>-->
<!--<br />-->
<!--<button type="button" onclick="drawIt();">不断地点我看 Demo</button>-->
<!--<button type="button" onclick="clearIt();">清除画布</button>-->
<canvas id="mc" width="600" height="460"
        style="border:1px solid black"></canvas>
<script type="text/javascript">
    // 获取canvas元素对应的DOM对象
    var canvas = document.getElementById('mc');
    // 获取在canvas上绘图的CanvasRenderingContext2D对象
    var ctx = canvas.getContext('2d');
    var image = new Image();
    image.src = "resource/image1.png";
    image.onload = function()
    {
        // 用带透明度参数的方法绘制图片
        drawImage(image , 124  , 20 , 0.4);
    };
    var drawImage = function(image , x  , y , alpha)
    {
        // 绘制图片
        ctx.drawImage(image , x , y);
        // 获取从x、y开始，宽为image.width、高为image.height的图片数据
        // 也就是获取绘制的图片数据
        var imgData = ctx.getImageData(x , y , image.width , image.height);
        for (var i = 0 , len = imgData.data.length ; i < len ; i += 4 )
        {
            // 改变每个像素的透明度
            imgData.data[i + 3] = imgData.data[i + 3] * alpha;
        }
        // 将获取的图片数据放回去。
        ctx.putImageData(imgData , x , y);
    }
    </script>
<script type="text/javascript" charset="utf-8">

    var ctx = document.getElementById('canvas').getContext('2d');

    var canvasScaleX = 1;
    var canvasScaleY = 1;

    var stepScaleX = 1.1;
    var stepScaleY = 1.1;
    ctx.strokeRect(0, 0, 60, 60);
    function drawIt() {
        if (canvasScaleX == 1 && canvasScaleY == 1)
            ctx.strokeRect(0, 0, 60, 60);

        canvasScaleX *= stepScaleX;
        canvasScaleY *= stepScaleY;

        /*
         * context.scale(x, y) - 将当前的用户坐标系缩放指定的倍数
         *   x - 水平方向上的缩放倍数
         *   y - 垂直方向上的缩放倍数
         */
        ctx.strokeStyle = "blue";
        ctx.scale(stepScaleX, stepScaleY);
        ctx.strokeRect(0, 0, 60, 60);
    }

    function clearIt() {
        ctx.scale(1 / canvasScaleX, 1 / canvasScaleY);
        canvasScaleX = 1;
        canvasScaleY = 1;
        ctx.strokeStyle = "black";

        ctx.clearRect(0, 0, 400, 400);
    }

</script>
</body>
</html>